<div class="relative w-full h-screen overflow-hidden font-sans">
  
  <!-- 3D Canvas -->
  <canvas #canvasContainer class="block w-full h-full outline-none cursor-grab active:cursor-grabbing"></canvas>

  <!-- UI Overlay -->
  <div class="absolute top-6 left-6 max-w-xs w-full pointer-events-none">
    <div class="bg-gray-900/90 backdrop-blur-xl rounded-xl shadow-2xl p-6 border border-gray-700/50 pointer-events-auto">
      
      <!-- Header -->
      <div class="flex items-center justify-between mb-6">
        <div>
          <h1 class="text-lg font-bold text-gray-100 tracking-tight leading-none">GeoViewer</h1>
          <p class="text-[10px] text-gray-400 uppercase tracking-widest mt-1">Prototype 0.9</p>
        </div>
        <div class="h-2 w-2 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.6)] animate-pulse"></div>
      </div>

      <!-- Animation Modes -->
      <div class="mb-5">
        <h2 class="text-[10px] font-bold text-gray-500 uppercase tracking-wider mb-2">Animation</h2>
        <div class="grid grid-cols-3 gap-2">
          <button 
            (click)="setMode('mode1')"
            [class]="activeMode() === 'mode1' 
              ? 'bg-blue-600 text-white shadow-lg shadow-blue-900/20' 
              : 'bg-gray-800 text-gray-400 hover:bg-gray-700 hover:text-gray-200'"
            class="cursor-pointer px-2 py-2 rounded-md text-xs font-semibold transition-all duration-200 border border-transparent hover:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500/50">
            Rotate
          </button>
          
          <button 
            (click)="setMode('mode2')"
            [class]="activeMode() === 'mode2' 
              ? 'bg-blue-600 text-white shadow-lg shadow-blue-900/20' 
              : 'bg-gray-800 text-gray-400 hover:bg-gray-700 hover:text-gray-200'"
            class="cursor-pointer px-2 py-2 rounded-md text-xs font-semibold transition-all duration-200 border border-transparent hover:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500/50">
            Sync
          </button>
          
          <button 
            (click)="setMode('mode3')"
            [class]="activeMode() === 'mode3' 
              ? 'bg-blue-600 text-white shadow-lg shadow-blue-900/20' 
              : 'bg-gray-800 text-gray-400 hover:bg-gray-700 hover:text-gray-200'"
            class="cursor-pointer px-2 py-2 rounded-md text-xs font-semibold transition-all duration-200 border border-transparent hover:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500/50">
            Swarm
          </button>
        </div>
      </div>

      <!-- Visual Styles -->
      <div class="mb-6">
        <h2 class="text-[10px] font-bold text-gray-500 uppercase tracking-wider mb-2">Style</h2>
        <div class="grid grid-cols-3 gap-2">
          <button 
            (click)="setStyle('styleA')"
            [class]="activeStyle() === 'styleA' 
              ? 'bg-gray-600 text-white shadow-lg shadow-gray-900/20' 
              : 'bg-gray-800 text-gray-400 hover:bg-gray-700 hover:text-gray-200'"
            class="cursor-pointer px-2 py-2 rounded-md text-xs font-semibold transition-all duration-200 border border-transparent hover:border-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500/50">
            Mono
          </button>
          
          <button 
            (click)="setStyle('styleB')"
            [class]="activeStyle() === 'styleB' 
              ? 'bg-blue-600 text-white shadow-lg shadow-blue-900/20' 
              : 'bg-gray-800 text-gray-400 hover:bg-gray-700 hover:text-gray-200'"
            class="cursor-pointer px-2 py-2 rounded-md text-xs font-semibold transition-all duration-200 border border-transparent hover:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500/50">
            Blue
          </button>
          
          <button 
            (click)="setStyle('styleC')"
            [class]="activeStyle() === 'styleC' 
              ? 'bg-fuchsia-600 text-white shadow-lg shadow-fuchsia-900/20' 
              : 'bg-gray-800 text-gray-400 hover:bg-gray-700 hover:text-gray-200'"
            class="cursor-pointer px-2 py-2 rounded-md text-xs font-semibold transition-all duration-200 border border-transparent hover:border-gray-600 focus:outline-none focus:ring-2 focus:ring-fuchsia-500/50">
            Neon
          </button>
        </div>
      </div>

      <div class="h-px bg-gray-700 mb-4"></div>

      <!-- Reset -->
      <div class="grid grid-cols-3 gap-2 mb-4">
        <button 
          (click)="reset('perpendicular')"
          class="cursor-pointer w-full flex items-center justify-center gap-2 px-2 py-2 rounded-md border border-gray-600 text-gray-400 text-xs font-medium hover:bg-gray-800 hover:text-white transition-all active:scale-95 focus:outline-none focus:ring-2 focus:ring-gray-500/50">
          Perspective
        </button>
        <button 
          (click)="reset('coplanar')"
          class="cursor-pointer w-full flex items-center justify-center gap-2 px-2 py-2 rounded-md border border-gray-600 text-gray-400 text-xs font-medium hover:bg-gray-800 hover:text-white transition-all active:scale-95 focus:outline-none focus:ring-2 focus:ring-gray-500/50">
          Coplanar
        </button>
        <button 
          (click)="reset('faceOn')"
          class="cursor-pointer w-full flex items-center justify-center gap-2 px-2 py-2 rounded-md border border-gray-600 text-gray-400 text-xs font-medium hover:bg-gray-800 hover:text-white transition-all active:scale-95 focus:outline-none focus:ring-2 focus:ring-gray-500/50">
          Face-On
        </button>
      </div>

       <!-- Sound Control -->
       <div class="pt-2 border-t border-gray-700/50">
        <div class="flex items-center gap-3">
          <button 
            (click)="toggleMute()" 
            class="p-2 rounded-full hover:bg-gray-700 text-gray-400 hover:text-white transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500/50"
            [class.text-red-400]="isMuted()">
            @if (isMuted()) {
               <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 5L6 9H2v6h4l5 4V5z"/><line x1="23" y1="9" x2="17" y2="15"/><line x1="17" y1="9" x2="23" y2="15"/></svg>
            } @else {
               <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
            }
          </button>
          
          <div class="flex-1">
             <input 
              type="range" 
              min="0" 
              max="1" 
              step="0.01" 
              [value]="volume()" 
              (input)="onVolumeChange($event)"
              class="w-full h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50">
          </div>
        </div>
      </div>

    </div>
  </div>

  <div class="absolute bottom-6 left-6 text-gray-500 text-[10px] pointer-events-none select-none tracking-wide">
    <span class="opacity-50 font-bold">CONTROLS &nbsp; // &nbsp;</span> ROTATE: DRAG &nbsp; • &nbsp; ZOOM: SCROLL &nbsp; • &nbsp; PAN: RIGHT-CLICK
  </div>
</div>